# 网络相关

## webscoket实现原理

> `WebSocket` t实现双工的原理基于 `HTTP握手` 和 `TCP数据` 传送

1. 浏览器向服务器发起一个`HTTP请求`，请求中包含一些额外的头部信息。
2. 服务器解析这些附加的头信息，然后返回一个101状态码，表示协议已经升级成功。此时，客户端和服务器之间的连接就变成了`WebSocket协议`。
3. 握手成功后，客户端和服务器可以直接通过`TCP通道`进行数据传送，不再依赖HTTP协议。
4. WebSocket连接建立后，客户端和服务器可以像Socket一样进行有连接的数据通信，实现全双工通信。

需要注意的是，`WebSocket`是建立在`HTTP协议`之上的，必须依赖`HTTP协议`进行一次握手。但一旦握手成功，后续的数据传输就与HTTP无关。

## [cookie 和 session](https://blog.csdn.net/qq_39872626/article/details/124690775?utm_medium=distribute.pc_relevant.none-task-blog-2~default~baidujs_baidulandingword~default-4-124690775-blog-123384416.235^v38^pc_relevant_sort_base1&spm=1001.2101.3001.4242.3&utm_relevant_index=7)

区别：

1. **存储位置不同：** cookie数据保存在客户端浏览器中，session数据保存在服务器上。
2. **安全性不同：** cookie存储在客户端，对客户端是可见的，可被客户端窥探、复制、修改，相对不安全。session存储在服务器上，不存在敏感信息泄露的风险，比较安全。
3. **存储内容类型不同：** session中存储的是对象。cookie中存储的是字符串。
4. **有效期不同：** cookie的过期时间可以被设置很长。session依赖于名为JSESSIONID的cookie，其过期时间默认为-1，只要关闭了浏览器窗口，该session就会过期，有效期较短。
5. **服务器压力不同：** 每个用户都会产生一个session，如果并发访问的用户过多，就会产生非常多的session，耗费大量的内存。
6. **浏览器支持不同：** cookie被广泛支持，而session在某些老版本的浏览器上可能不被支持。

## 网络传输/通信模式

> 传输模式是指在两个设备之间传输数据。它也被称为通信模式。

### 单工模式

> 通信是单向的，就像在单行道上一样。链路上的两个设备中只有一个可以发送，另一个只能接收。单工模式可以使用通道的全部容量向一个方向发送数据。

示例：键盘和传统显示器。键盘只能引入输入，显示器只能给出输出。

+ 优点

  + 单工模式是最`简单`和最`可靠`的通信模式。

  + 这是最具成本`效益`的模式，因为它只需要一个通信渠道。

  + 发送和接收设备之间无需协调，`简化了通信过程`。

+ 缺点

  + 只能进行单向通信。

  + 无法验证传输的数据是否已被正确接收。

  + 单工模式不适合需要双向通信的应用。

### 半双工模式(http)

> 在半双工模式下，每个站都可以发送和接收，但`不能同时进行`。当一台设备在发送时，另一台只能接收，反之亦然。半双工模式用于不需要同时双向通信的场合。信道的全部容量可以用于每个方向。

示例：对讲机，一次发送一条消息，双向发送消息。

+ 优点

  + 半双工模式允许`双向通信`，这在设备需要发送和接收数据的情况下很有用。

  + 这是一种比单工模式更`有效`的通信模式，因为信道可用于传输和接收。

  + 半双工模式比全双工模式更`便宜`，因为它只需要一个通信通道。

+ 缺点

  + 半双工模式不如单工模式可靠，因为两个设备不能同时传输。

  + 传输和接收之间存在延迟，这可能会在某些应用程序中引起问题。

  + 发送和接收设备之间需要协调，这会使通信过程复杂化。

### 全双工模式(websocket)

> 在全双工模式下，两个站可以`同时发送和接收`。

示例：电话网络，其中两个人通过电话线进行通信，两人可以通过电话线同时通话和收听。

+ 优点

  + 全双工模式允许同时进行`双向通信`，非常适合视频会议或在线游戏等实时应用。

  + 这是`最有效`的通信模式，因为两个设备可以同时传输和接收数据。

  + 全双工模式提供了高水平的`可靠性`和`准确性`，因为不需要纠错机制。

+ 缺点

  + 全双工模式是最昂贵的模式，因为它需要两个通信通道。

  + 它比单工和半双工模式更复杂，因为它需要两条物理上独立的传输路径或信道容量的划分。

  + 全双工模式可能并不适合所有应用程序，因为它需要高水平的带宽并且对于某些类型的通信可能不是必需的。

